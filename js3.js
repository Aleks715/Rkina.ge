const galleryPhotos = [
  { img: "img/07372bf9-0bb4-4dd3-8643-42ca19586344.jpg", title: "ჩვენი პროდუქტები" },
  { img: "img/9372de8f-b4e1-41b7-b223-77bf123f2343.jpg", title: "ჩვენი პროდუქტები" },
  { img: "img/9538ada6-8a55-44c5-b87b-843a09b6021a.jpg", title: "ჩვენი პროდუქტები" },
  { img: "img/44110c77-39dc-4e19-a860-f38d74212025.jpg", title: "ჩვენი პროდუქტები" },
  { img: "img/c3007079-5eb2-4441-b16c-04d0fff085a0.jpg", title: "ჩვენი პროდუქტები" },
  { img: "img/85191aa5-6e2a-46cd-85bc-18137b425b30.jpg", title: "ჩვენი პროდუქტები" },
  { img: "img/94965a62-634b-493d-a3fc-be57b5630fa9.jpeg", title: "ჩვენი პროდუქტები" },
  { img: "img/4926921a-c157-4bbe-b87f-38a308800893.jpg", title: "ჩვენი პროდუქტები" },
  { img: "img/71060352-d08d-4e3e-af2e-d753c695c608.jpg", title: "ჩვენი პროდუქტები" },
  { img: "img/a5a79c89-1258-4040-a129-e1ef3a51faf2.jpg", title: "ჩვენი პროდუქტები" },
  { img: "img/a8a03f99-2249-402d-a47a-f91ceaed48db.jpeg", title: "ჩვენი პროდუქტები" },
  { img: "img/a29aeb13-e91a-4d2d-b829-3fe4f83be24b.jpg", title: "ჩვენი პროდუქტები" },
  { img: "img/a6470da0-669b-49bb-a6f2-7219da8d978b.jpg", title: "ჩვენი პროდუქტები" },
  { img: "img/aca5f93e-5ca2-45b7-a20e-1c7fd8cc6c2e.jpg", title: "ჩვენი პროდუქტები" },
  { img: "img/ad540053-b107-4257-ba0a-a08badf046d7.jpeg", title: "ჩვენი პროდუქტები" },
  { img: "img/b8e2ad00-2091-4321-8bd3-f32207f6a0e6.jpeg", title: "ჩვენი პროდუქტები" },
  { img: "img/b90e8d3c-1ebd-4d5a-ab3e-b97f733e0a39.jpg", title: "ჩვენი პროდუქტები" },
  { img: "img/c2e069f4-9e8f-4f8c-b167-cc652598f365.jpg", title: "ჩვენი პროდუქტები" },
  { img: "img/c81eff0e-086f-4ed1-9721-e865adfbbc5f.jpeg", title: "ჩვენი პროდუქტები" },
  { img: "img/c016133e-e632-42b1-8ec7-4f440a6cd6b0.jpg", title: "ჩვენი პროდუქტები" },
  { img: "img/c4761061-8b9b-4b59-8c15-ea92224a1fbc.jpg", title: "ჩვენი პროდუქტები" },
  { img: "img/cb78e66d-2d98-4b08-9719-206c849e8806.jpg", title: "ჩვენი პროდუქტები" },
  { img: "img/cb03595a-b3be-4783-9bd3-fe47be53e7f2.jpg", title: "ჩვენი პროდუქტები" },
  { img: "img/cce15fe4-9779-4d2d-8a96-6326adf6fa2e.jpg", title: "ჩვენი პროდუქტები" },
  { img: "img/ced5a1ba-6043-46d1-b321-623aed1bdcce.jpg", title: "ჩვენი პროდუქტები" },
  { img: "img/cfa82a10-c403-4dbb-9ce0-bd52adbb8ed3.jpg", title: "ჩვენი პროდუქტები" },
  { img: "img/d6b3402f-f166-44c2-9494-6c33f578d697.jpg", title: "ჩვენი პროდუქტები" },
  { img: "img/d33fa4a0-a94d-4125-91de-5d404b5cc32a (1).jpg", title: "ჩვენი პროდუქტები" },
  { img: "img/d33fa4a0-a94d-4125-91de-5d404b5cc32a.jpg", title: "ჩვენი პროდუქტები" },
  { img: "img/d83255d0-e717-4dd5-9b92-c36ec56129f9.jpeg", title: "ჩვენი პროდუქტები" },
  { img: "img/dc01f343-7183-43df-b5a3-4ea2f6920648.jpeg", title: "ჩვენი პროდუქტები" },
  { img: "img/de16fdca-955b-4b6e-a469-ac203d0b9365.jpeg", title: "ჩვენი პროდუქტები" },
  { img: "img/e7ef68b6-e23f-4fd8-9f8c-4cf5e2bf0bfb.jpg", title: "ჩვენი პროდუქტები" },
  { img: "img/e8c8ebf8-79c6-483c-a466-b9ac80281cdd.jpg", title: "ჩვენი პროდუქტები" },
  { img: "img/e9d0110a-7ea9-473c-8be7-4c6a82ac6c9b.jpeg", title: "ჩვენი პროდუქტები" },
  { img: "img/e15efbd8-76b2-4531-92ae-b7272855cce5.jpeg", title: "ჩვენი პროდუქტები" },
  { img: "img/e46e4d40-2fd7-4a21-a6a9-30f28f5760bd.jpg", title: "ჩვენი პროდუქტები" },
  { img: "img/ef7a2a5a-d183-47e0-a048-6773819c7c60.jpg", title: "ჩვენი პროდუქტები" },
  { img: "img/fe2d0f0c-51de-4f62-b568-4dba512bf325.jpeg", title: "ჩვენი პროდუქტები" },
  { img: "img/fbc2c476-3367-404f-b85e-d1854542d1e8.jpg", title: "ჩვენი პროდუქტები" }
];

function generateGallery() {
  const grid = document.getElementById('cards-grid');
  let html = "";

  galleryPhotos.forEach((photo, i) => {
    html += `
      <div class="card glassmorph" data-aos="fade-up" data-aos-delay="${(i % 8) * 80}">
        <div class="card-img">
          <img src="${photo.img}" alt="${photo.title}" loading="lazy" data-index="${i}">
        </div>
        <div class="card-content">
          <h3>${photo.title}</h3>
          <p>პრემიუმ ხარისხი • ხელნაკეთი</p>
        </div>
      </div>
    `;
  });

  grid.innerHTML = html;
}

/* Lightbox – დიდი ფოტო + ისრები */
let currentIndex = 0;

function openLightbox(index) {
  const lightbox = document.getElementById('lightbox');
  const imgEl = document.getElementById('lightbox-img');
  const titleEl = document.getElementById('lightbox-title');

  currentIndex = index;
  const item = galleryPhotos[currentIndex];
  if (!item) return;

  imgEl.src = item.img;
  imgEl.alt = item.title;
  titleEl.textContent = item.title;

  lightbox.classList.add('show');
}

function closeLightbox() {
  const lightbox = document.getElementById('lightbox');
  if (lightbox) lightbox.classList.remove('show');
}

function changeSlide(step) {
  const total = galleryPhotos.length;
  if (!total) return;
  currentIndex = (currentIndex + step + total) % total;
  openLightbox(currentIndex);
}

// Dark mode, navbar, preloader + Lightbox event-ები
document.addEventListener("DOMContentLoaded", () => {
  generateGallery();
  AOS.init({ duration: 800, easing: "ease-out-quart", once: true });

  // --- Lightbox main gallery-სთვის ---
  const cardsGrid = document.getElementById('cards-grid');
  const lightboxEl = document.getElementById('lightbox');
  const closeBtn = document.querySelector('.lightbox-close');
  const nextBtn = document.querySelector('.lightbox-next');
  const prevBtn = document.querySelector('.lightbox-prev');

  if (cardsGrid) {
    cardsGrid.addEventListener('click', (e) => {
      const img = e.target.closest('.card-img img');
      if (!img) return;
      const index = parseInt(img.dataset.index, 10);
      if (!isNaN(index)) openLightbox(index);
    });
  }

  if (closeBtn) closeBtn.addEventListener('click', closeLightbox);
  if (nextBtn) nextBtn.addEventListener('click', () => changeSlide(1));
  if (prevBtn) prevBtn.addEventListener('click', () => changeSlide(-1));

  if (lightboxEl) {
    lightboxEl.addEventListener('click', (e) => {
      if (e.target === lightboxEl) closeLightbox();
    });
  }

  document.addEventListener('keydown', (e) => {
    const lb = document.getElementById('lightbox');
    if (!lb || !lb.classList.contains('show')) return;
    if (e.key === 'Escape') closeLightbox();
    if (e.key === 'ArrowRight') changeSlide(1);
    if (e.key === 'ArrowLeft') changeSlide(-1);
  });

  document.getElementById('dark-mode-toggle').addEventListener('click', () => {
    document.body.classList.toggle('dark-mode');
  });

  window.addEventListener('scroll', () => {
    document.getElementById('navbar').classList.toggle('scrolled', scrollY > 50);
  });

  // Preloader
  window.addEventListener('load', () => {
    const preloader = document.getElementById('preloader');
    preloader.style.opacity = '0';
    setTimeout(() => preloader.style.display = 'none', 600);
  });

  // Hamburger
  document.getElementById('hamburger').addEventListener('click', () => {
    document.getElementById('hamburger').classList.toggle('active');
    document.getElementById('nav-menu').classList.toggle('active');
  });
});

/////////////////////////////////////////
const photos=[{s:"https://i.imgur.com/8QZ1mP0.jpeg",t:"მოდერნ სპირალური კიბე",c:"კიბე"},{s:"https://i.imgur.com/Q8m2v9X.jpeg",t:"შავი მქრალი რელსი",c:"ბალკონი"},{s:"https://i.imgur.com/8mP7vZk.jpeg",t:"ლაზერული ჭიშკარი",c:"ჭიშკარი"},{s:"https://i.imgur.com/9kL2mPx.jpeg",t:"რკინის მაგიდა",c:"ავეჯი"},{s:"https://i.imgur.com/6mN5pQr.jpeg",t:"დეკორატიული პანელი",c:"დეკორი"}/* შენი 40+ ფოტო აქ */];

function render(t){const e=document.getElementById("grid");let n="";t.forEach((t=>{n+=`<div class="card" data-cat="${t.c}"><a href="${t.s}" data-fancybox="gal" data-caption="${t.t}"><img src="${t.s}" loading="lazy" alt="${t.t}"></a><div class="overlay"><h3>${t.t}</h3><div class="actions"><div class="like">♥</div><a href="https://wa.me/?text=${encodeURIComponent(t.t+" — Rkina.ge")}" target="_blank">✉</a></div></div></div>`})),e.innerHTML=n}
document.addEventListener("DOMContentLoaded",()=>{render(photos),document.getElementById("search").addEventListener("input",e=>{const n=e.target.value.toLowerCase(),i=photos.filter(t=>t.t.toLowerCase().includes(n));render(i)}),document.querySelectorAll(".filters button").forEach(e=>{e.addEventListener("click",()=>{document.querySelectorAll(".filters button").forEach(t=>t.classList.remove("active")),e.classList.add("active");const n=e.dataset.f;"all"===n?render(photos):render(photos.filter(t=>t.c===n))})}),document.getElementById("dark").addEventListener("click",()=>{document.body.classList.toggle("dark-mode")}),document.getElementById("ham").addEventListener("click",function(){this.classList.toggle("active")}),window.addEventListener("scroll",()=>{document.getElementById("nav").classList.toggle("scrolled",scrollY>50)}),window.addEventListener("load",()=>{document.getElementById("preloader").style.opacity="0",setTimeout(()=>{document.getElementById("preloader").style.display="none"},600)})});

